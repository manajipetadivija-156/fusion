{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ user.name }} — FusionStories Profile</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body class="page">

    <header class="navbar">
        <div class="container">
            <a href="{% url 'home' %}" class="logo">FusionStories</a>
            <nav class="nav-links">
                <a href="{% url 'home' %}">Home</a>
                <a href="{% url 'posts' %}">Posts</a>
                {% if username %}<a href="{% url 'create' %}">Create</a>{% endif %}
            </nav>
            <div class="auth-buttons">
                {% if username %}
                <a href="{% url 'profile' %}"><img src="{{ profile_img }}" class="profile-pic"></a>
                <a href="{% url 'logout' %}" class="logout-btn">Logout</a>
                {% else %}
                <a href="{% url 'login' %}" class="login-btn">Login</a>
                <a href="{% url 'register' %}" class="register-btn">Register</a>
                {% endif %}
            </div>
        </div>
    </header>

    <main class="profile-page">
        <div class="profile-header">
            <img src="{{ profile_img }}" class="profile-pic-large">
            <h1>{{ user.name }}</h1>
            <p>{{ user.desc|default:"This user hasn’t added a bio yet." }}</p>
        </div>

        <section class="user-posts">
            <h2>My Posts</h2>
            {% if posts %}
            <div class="posts-grid">
                {% for post in posts %}
                <div class="post-card">
                    {% if post.image %}
                    <img src="{{ post.image.url }}">
                    {% else %}
                    <img src="https://picsum.photos/600/400?random={{ forloop.counter }}">
                    {% endif %}
                    <h3>{{ post.title }}</h3>
                    <a href="{% url 'read' post.id %}" class="read-more">Read More →</a>
                    <div class="post-actions">
                        <a href="{% url 'edit' post.id %}" class="edit-btn">Edit</a>
                        <a href="{% url 'delete' post.id %}" class="delete-btn">Delete</a>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p>No posts yet.</p>
            {% endif %}
        </section>
    </main>

</body>
</html>
